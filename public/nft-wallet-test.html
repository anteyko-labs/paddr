<!DOCTYPE html>
<html>
<head>
    <title>NFT Wallet Test</title>
    <style>
        body { font-family: Arial, sans-serif; margin: 20px; }
        .nft-card { border: 1px solid #ccc; padding: 20px; margin: 10px; border-radius: 8px; }
        .video-container { margin: 10px 0; }
        video { width: 100%; max-width: 400px; }
        .metadata { background: #f5f5f5; padding: 10px; border-radius: 4px; margin: 10px 0; }
        .error { color: red; }
        .success { color: green; }
    </style>
</head>
<body>
    <h1>NFT Wallet Test</h1>
    <p>This page simulates how NFTs appear in MetaMask wallet</p>
    
    <div id="nft-container"></div>
    
    <script>
        async function loadNFT(tokenId) {
            try {
                const response = await fetch(`/api/nft-metadata/${tokenId}`);
                const metadata = await response.json();
                
                const nftCard = document.createElement('div');
                nftCard.className = 'nft-card';
                
                nftCard.innerHTML = `
                    <h3>${metadata.name}</h3>
                    <p><strong>Tier:</strong> ${metadata.attributes[0].value}</p>
                    <p><strong>Description:</strong> ${metadata.description}</p>
                    
                    <div class="video-container">
                        <h4>Video Preview:</h4>
                        <video controls>
                            <source src="${metadata.image}" type="video/mp4">
                            Your browser does not support the video tag.
                        </video>
                    </div>
                    
                    <div class="metadata">
                        <h4>Metadata:</h4>
                        <pre>${JSON.stringify(metadata, null, 2)}</pre>
                    </div>
                `;
                
                document.getElementById('nft-container').appendChild(nftCard);
                
            } catch (error) {
                console.error(`Error loading NFT ${tokenId}:`, error);
                const errorDiv = document.createElement('div');
                errorDiv.className = 'error';
                errorDiv.textContent = `Error loading NFT ${tokenId}: ${error.message}`;
                document.getElementById('nft-container').appendChild(errorDiv);
            }
        }
        
        // Загружаем несколько NFT для тестирования
        [0, 1, 2, 3, 10].forEach(tokenId => {
            loadNFT(tokenId);
        });
    </script>
</body>
</html>
