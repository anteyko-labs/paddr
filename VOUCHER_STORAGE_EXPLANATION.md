# üóÑÔ∏è –ì–î–ï –•–†–ê–ù–Ø–¢–°–Ø –í–ê–£–ß–ï–†–´ - –î–ï–¢–ê–õ–¨–ù–û–ï –û–ë–™–Ø–°–ù–ï–ù–ò–ï

## ‚ùì –í–ê–® –í–û–ü–†–û–°:
> "–ê –≥–¥–µ —Ö—Ä–∞–Ω—è—Ç—Å—è –≤–∞—É—á–µ—Ä—ã? –ï—Å–ª–∏ –Ω–µ –≤ –∫–æ—à–µ–ª—å–∫–µ –∞ —Ç–æ–ª—å–∫–æ –≤ –õ–ö, –∞ —á—Ç–æ –µ—Å–ª–∏ –æ–Ω –≤—ã–π–¥–µ—Ç —Å —Å–∞–π—Ç–∞ –∏ –æ–ø—è—Ç—å –∑–∞–π–¥–µ—Ç –æ–Ω–∏ –≤–µ–¥—å –Ω–µ —Å–æ—Ö—Ä–∞–Ω—è—Ç—Å—è? –ò–ª–∏ –æ–Ω–∏ —Ö—Ä–∞–Ω—è—Ç—Å—è –≤ –±–ª–æ–∫—á–µ–π–Ω–µ –Ω–æ –æ—Ç–æ–±—Ä–∞–∂–∞—é—Ç—Å—è –Ω–∞ —Ñ—Ä–æ–Ω—Ç–µ?"

## ‚úÖ –û–¢–í–ï–¢: –í–ê–£–ß–ï–†–´ –•–†–ê–ù–Ø–¢–°–Ø –í –ë–õ–û–ö–ß–ï–ô–ù–ï!

### üîó –í–ê–£–ß–ï–†–´ –•–†–ê–ù–Ø–¢–°–Ø –í –ë–õ–û–ö–ß–ï–ô–ù–ï:

#### 1. **–í —Å–º–∞—Ä—Ç-–∫–æ–Ω—Ç—Ä–∞–∫—Ç–µ VoucherManager:**
```solidity
// Mappings –¥–ª—è —Ö—Ä–∞–Ω–µ–Ω–∏—è –≤–∞—É—á–µ—Ä–æ–≤
mapping(uint256 => Voucher) public vouchers;           // –í—Å–µ –≤–∞—É—á–µ—Ä—ã –ø–æ ID
mapping(address => uint256[]) public userVouchers;     // –í–∞—É—á–µ—Ä—ã –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
mapping(uint256 => bool) public usedVouchers;          // –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–Ω—ã–µ –≤–∞—É—á–µ—Ä—ã
mapping(uint256 => uint256) public voucherUses;        // –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–π
mapping(string => bool) public qrCodeUsed;             // QR-–∫–æ–¥—ã
```

#### 2. **–°—Ç—Ä—É–∫—Ç—É—Ä–∞ –≤–∞—É—á–µ—Ä–∞ –≤ –±–ª–æ–∫—á–µ–π–Ω–µ:**
```solidity
struct Voucher {
    uint256 id;                    // ID –≤–∞—É—á–µ—Ä–∞
    address owner;                 // –í–ª–∞–¥–µ–ª–µ—Ü –≤–∞—É—á–µ—Ä–∞
    VoucherType voucherType;       // –¢–∏–ø –≤–∞—É—á–µ—Ä–∞
    string name;                   // –ù–∞–∑–≤–∞–Ω–∏–µ
    string description;            // –û–ø–∏—Å–∞–Ω–∏–µ
    string value;                  // –ó–Ω–∞—á–µ–Ω–∏–µ
    uint256 maxUses;              // –ú–∞–∫—Å–∏–º—É–º –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–π
    uint256 currentUses;          // –¢–µ–∫—É—â–∏–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è
    uint256 expiresAt;            // –î–∞—Ç–∞ –∏—Å—Ç–µ—á–µ–Ω–∏—è
    bool isActive;                // –ê–∫—Ç–∏–≤–µ–Ω –ª–∏
    string qrCode;                // QR-–∫–æ–¥
    uint256 positionId;           // ID –ø–æ–∑–∏—Ü–∏–∏ —Å—Ç–µ–π–∫–∏–Ω–≥–∞
}
```

## üîÑ –ö–ê–ö –†–ê–ë–û–¢–ê–ï–¢ –°–ò–°–¢–ï–ú–ê:

### 1. **–ü—Ä–∏ —Å—Ç–µ–π–∫–∏–Ω–≥–µ (—Å–æ–∑–¥–∞–Ω–∏–µ –≤–∞—É—á–µ—Ä–æ–≤):**
```solidity
// MultiStakeManager.sol —Å—Ç—Ä–æ–∫–∏ 105-108
if (voucherManager != address(0)) {
    VoucherManager(voucherManager).createVouchersForPosition(msg.sender, positionId, tier);
}
```

**–ß—Ç–æ –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç:**
1. **–í–∞—É—á–µ—Ä—ã —Å–æ–∑–¥–∞—é—Ç—Å—è** –≤ –±–ª–æ–∫—á–µ–π–Ω–µ
2. **–°–æ—Ö—Ä–∞–Ω—è—é—Ç—Å—è** –≤ mapping `vouchers[voucherId]`
3. **–ü—Ä–∏–≤—è–∑—ã–≤–∞—é—Ç—Å—è –∫ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—é** –≤ `userVouchers[userAddress]`
4. **–ì–µ–Ω–µ—Ä–∏—Ä—É—é—Ç—Å—è QR-–∫–æ–¥—ã** –¥–ª—è –∫–∞–∂–¥–æ–≥–æ –≤–∞—É—á–µ—Ä–∞

### 2. **–ü—Ä–∏ –≤—Ö–æ–¥–µ –≤ –ª–∏—á–Ω—ã–π –∫–∞–±–∏–Ω–µ—Ç (–ø–æ–ª—É—á–µ–Ω–∏–µ –≤–∞—É—á–µ—Ä–æ–≤):**
```typescript
// hooks/useVouchers.ts —Å—Ç—Ä–æ–∫–∏ 27-33
const { data: voucherIds, refetch: refetchVoucherIds } = useReadContract({
  address: VOUCHER_MANAGER_ADDRESS,
  abi: VOUCHER_MANAGER_ABI,
  functionName: 'getUserVouchers',  // –ü–æ–ª—É—á–∞–µ–º ID –≤–∞—É—á–µ—Ä–æ–≤ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
  args: [address!],
  query: { enabled: !!address },
});
```

**–ß—Ç–æ –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç:**
1. **–§—Ä–æ–Ω—Ç–µ–Ω–¥ –æ–±—Ä–∞—â–∞–µ—Ç—Å—è** –∫ –±–ª–æ–∫—á–µ–π–Ω—É
2. **–ü–æ–ª—É—á–∞–µ—Ç —Å–ø–∏—Å–æ–∫ ID** –≤–∞—É—á–µ—Ä–æ–≤ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
3. **–ó–∞–≥—Ä—É–∂–∞–µ—Ç –¥–µ—Ç–∞–ª–∏** –∫–∞–∂–¥–æ–≥–æ –≤–∞—É—á–µ—Ä–∞
4. **–û—Ç–æ–±—Ä–∞–∂–∞–µ—Ç** –≤ –ª–∏—á–Ω–æ–º –∫–∞–±–∏–Ω–µ—Ç–µ

### 3. **–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ:**
```typescript
// hooks/useVouchers.ts —Å—Ç—Ä–æ–∫–∏ 74-82
useEffect(() => {
  if (!address) return;
  
  const interval = setInterval(() => {
    refetchVoucherIds();  // –û–±–Ω–æ–≤–ª—è–µ–º –∫–∞–∂–¥—ã–µ 30 —Å–µ–∫—É–Ω–¥
  }, 30000);

  return () => clearInterval(interval);
}, [address, refetchVoucherIds]);
```

## üéØ –û–¢–í–ï–¢–´ –ù–ê –í–ê–®–ò –í–û–ü–†–û–°–´:

### ‚ùì "–ì–¥–µ —Ö—Ä–∞–Ω—è—Ç—Å—è –≤–∞—É—á–µ—Ä—ã?"
**‚úÖ –í –ë–õ–û–ö–ß–ï–ô–ù–ï!** –í —Å–º–∞—Ä—Ç-–∫–æ–Ω—Ç—Ä–∞–∫—Ç–µ `VoucherManager`

### ‚ùì "–ß—Ç–æ –µ—Å–ª–∏ –≤—ã–π–¥–µ—Ç —Å —Å–∞–π—Ç–∞ –∏ –æ–ø—è—Ç—å –∑–∞–π–¥–µ—Ç?"
**‚úÖ –í–ê–£–ß–ï–†–´ –°–û–•–†–ê–ù–Ø–¢–°–Ø!** –û–Ω–∏ —Ö—Ä–∞–Ω—è—Ç—Å—è –≤ –±–ª–æ–∫—á–µ–π–Ω–µ, –Ω–µ –≤ –±—Ä–∞—É–∑–µ—Ä–µ

### ‚ùì "–û–Ω–∏ —Ö—Ä–∞–Ω—è—Ç—Å—è –≤ –±–ª–æ–∫—á–µ–π–Ω–µ –Ω–æ –æ—Ç–æ–±—Ä–∞–∂–∞—é—Ç—Å—è –Ω–∞ —Ñ—Ä–æ–Ω—Ç–µ?"
**‚úÖ –¢–û–ß–ù–û!** –•—Ä–∞–Ω—è—Ç—Å—è –≤ –±–ª–æ–∫—á–µ–π–Ω–µ, –æ—Ç–æ–±—Ä–∞–∂–∞—é—Ç—Å—è –Ω–∞ —Ñ—Ä–æ–Ω—Ç–µ

## üîç –î–ï–¢–ê–õ–¨–ù–´–ô –ü–†–û–¶–ï–°–°:

### üì± –ü–†–ò –í–•–û–î–ï –í –õ–ò–ß–ù–´–ô –ö–ê–ë–ò–ù–ï–¢:

#### 1. **–ü–æ–ª—É—á–µ–Ω–∏–µ —Å–ø–∏—Å–∫–∞ –≤–∞—É—á–µ—Ä–æ–≤:**
```solidity
// VoucherManager.sol —Å—Ç—Ä–æ–∫–∞ 271-273
function getUserVouchers(address user) external view returns (uint256[] memory) {
    return userVouchers[user];  // –í–æ–∑–≤—Ä–∞—â–∞–µ—Ç –º–∞—Å—Å–∏–≤ ID –≤–∞—É—á–µ—Ä–æ–≤
}
```

#### 2. **–ó–∞–≥—Ä—É–∑–∫–∞ –¥–µ—Ç–∞–ª–µ–π –∫–∞–∂–¥–æ–≥–æ –≤–∞—É—á–µ—Ä–∞:**
```typescript
// hooks/useVouchers.ts —Å—Ç—Ä–æ–∫–∏ 84-122
const fetchVoucherDetails = async (voucherId: bigint): Promise<Voucher | null> => {
  const voucherData = await publicClient.readContract({
    address: VOUCHER_MANAGER_ADDRESS,
    abi: VOUCHER_MANAGER_ABI,
    functionName: 'getVoucher',  // –ü–æ–ª—É—á–∞–µ–º –¥–µ—Ç–∞–ª–∏ –≤–∞—É—á–µ—Ä–∞
    args: [voucherId],
  });
  
  return {
    id: voucherId,
    owner: voucherData.owner,
    voucherType: Number(voucherData.voucherType),
    name: voucherData.name,
    description: voucherData.description,
    value: voucherData.value,
    // ... –æ—Å—Ç–∞–ª—å–Ω—ã–µ –ø–æ–ª—è
  };
};
```

#### 3. **–û—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ –≤ –ª–∏—á–Ω–æ–º –∫–∞–±–∏–Ω–µ—Ç–µ:**
```typescript
// components/dashboard/rewards-panel.tsx
const { vouchers, isLoading: isLoadingVouchers } = useVouchers();

// –û—Ç–æ–±—Ä–∞–∂–∞–µ–º –≤–∞—É—á–µ—Ä—ã —Å –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è–º–∏
{vouchers.map((voucher) => (
  <VoucherCard key={voucher.id} voucher={voucher} />
))}
```

## üõ°Ô∏è –ë–ï–ó–û–ü–ê–°–ù–û–°–¢–¨ –ò –ù–ê–î–ï–ñ–ù–û–°–¢–¨:

### ‚úÖ **–ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞ —Ö—Ä–∞–Ω–µ–Ω–∏—è –≤ –±–ª–æ–∫—á–µ–π–Ω–µ:**
1. **–ù–µ–∑–∞–≤–∏—Å–∏–º–æ—Å—Ç—å –æ—Ç —Å–µ—Ä–≤–µ—Ä–∞** - –≤–∞—É—á–µ—Ä—ã –Ω–µ –∑–∞–≤–∏—Å—è—Ç –æ—Ç —Ñ—Ä–æ–Ω—Ç–µ–Ω–¥–∞
2. **–ù–µ–∏–∑–º–µ–Ω–Ω–æ—Å—Ç—å** - –¥–∞–Ω–Ω—ã–µ –Ω–µ–ª—å–∑—è –ø–æ–¥–¥–µ–ª–∞—Ç—å
3. **–ü—Ä–æ–∑—Ä–∞—á–Ω–æ—Å—Ç—å** - –≤—Å–µ –æ–ø–µ—Ä–∞—Ü–∏–∏ –≤–∏–¥–Ω—ã –≤ –±–ª–æ–∫—á–µ–π–Ω–µ
4. **–î–µ—Ü–µ–Ω—Ç—Ä–∞–ª–∏–∑–∞—Ü–∏—è** - –Ω–µ—Ç –µ–¥–∏–Ω–æ–π —Ç–æ—á–∫–∏ –æ—Ç–∫–∞–∑–∞

### ‚úÖ **–ß—Ç–æ –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç –ø—Ä–∏ –ø–µ—Ä–µ–∑–∞–≥—Ä—É–∑–∫–µ —Å—Ç—Ä–∞–Ω–∏—Ü—ã:**
1. **–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –∑–∞—Ö–æ–¥–∏—Ç** –Ω–∞ —Å–∞–π—Ç
2. **–ü–æ–¥–∫–ª—é—á–∞–µ—Ç –∫–æ—à–µ–ª–µ–∫** (MetaMask, etc.)
3. **–§—Ä–æ–Ω—Ç–µ–Ω–¥ –æ–±—Ä–∞—â–∞–µ—Ç—Å—è** –∫ –±–ª–æ–∫—á–µ–π–Ω—É
4. **–ü–æ–ª—É—á–∞–µ—Ç –≤—Å–µ –≤–∞—É—á–µ—Ä—ã** –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
5. **–û—Ç–æ–±—Ä–∞–∂–∞–µ—Ç** –≤ –ª–∏—á–Ω–æ–º –∫–∞–±–∏–Ω–µ—Ç–µ

### ‚úÖ **–ß—Ç–æ –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç –ø—Ä–∏ —Å–º–µ–Ω–µ –±—Ä–∞—É–∑–µ—Ä–∞/—É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞:**
1. **–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –∑–∞—Ö–æ–¥–∏—Ç** —Å –Ω–æ–≤–æ–≥–æ —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞
2. **–ü–æ–¥–∫–ª—é—á–∞–µ—Ç —Ç–æ—Ç –∂–µ –∫–æ—à–µ–ª–µ–∫**
3. **–§—Ä–æ–Ω—Ç–µ–Ω–¥ –ø–æ–ª—É—á–∞–µ—Ç** —Ç–µ –∂–µ –≤–∞—É—á–µ—Ä—ã –∏–∑ –±–ª–æ–∫—á–µ–π–Ω–∞
4. **–û—Ç–æ–±—Ä–∞–∂–∞–µ—Ç** –≤—Å–µ –≤–∞—É—á–µ—Ä—ã

## üîÑ –ü–†–ò–ú–ï–† –†–ê–ë–û–¢–´:

### üìù **–°—Ü–µ–Ω–∞—Ä–∏–π 1: –ü–µ—Ä–≤—ã–π –≤—Ö–æ–¥**
1. –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å —Å—Ç–µ–π–∫–∞–µ—Ç 1000 —Ç–æ–∫–µ–Ω–æ–≤ (Silver)
2. –°–æ–∑–¥–∞–µ—Ç—Å—è 7 –≤–∞—É—á–µ—Ä–æ–≤ –≤ –±–ª–æ–∫—á–µ–π–Ω–µ
3. –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –∑–∞—Ö–æ–¥–∏—Ç –≤ –ª–∏—á–Ω—ã–π –∫–∞–±–∏–Ω–µ—Ç
4. –§—Ä–æ–Ω—Ç–µ–Ω–¥ –ø–æ–ª—É—á–∞–µ—Ç 7 –≤–∞—É—á–µ—Ä–æ–≤ –∏–∑ –±–ª–æ–∫—á–µ–π–Ω–∞
5. –û—Ç–æ–±—Ä–∞–∂–∞–µ—Ç –≤—Å–µ 7 –≤–∞—É—á–µ—Ä–æ–≤ —Å –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è–º–∏

### üìù **–°—Ü–µ–Ω–∞—Ä–∏–π 2: –ü–æ–≤—Ç–æ—Ä–Ω—ã–π –≤—Ö–æ–¥**
1. –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –≤—ã—Ö–æ–¥–∏—Ç —Å —Å–∞–π—Ç–∞
2. –ó–∞–∫—Ä—ã–≤–∞–µ—Ç –±—Ä–∞—É–∑–µ—Ä
3. –ó–∞—Ö–æ–¥–∏—Ç —Å–Ω–æ–≤–∞ —á–µ—Ä–µ–∑ –Ω–µ–¥–µ–ª—é
4. –ü–æ–¥–∫–ª—é—á–∞–µ—Ç —Ç–æ—Ç –∂–µ –∫–æ—à–µ–ª–µ–∫
5. –§—Ä–æ–Ω—Ç–µ–Ω–¥ –ø–æ–ª—É—á–∞–µ—Ç —Ç–µ –∂–µ 7 –≤–∞—É—á–µ—Ä–æ–≤ –∏–∑ –±–ª–æ–∫—á–µ–π–Ω–∞
6. –û—Ç–æ–±—Ä–∞–∂–∞–µ—Ç –≤—Å–µ 7 –≤–∞—É—á–µ—Ä–æ–≤

### üìù **–°—Ü–µ–Ω–∞—Ä–∏–π 3: –°–º–µ–Ω–∞ —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞**
1. –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –∑–∞—Ö–æ–¥–∏—Ç —Å —Ç–µ–ª–µ—Ñ–æ–Ω–∞
2. –ü–æ–¥–∫–ª—é—á–∞–µ—Ç —Ç–æ—Ç –∂–µ –∫–æ—à–µ–ª–µ–∫
3. –§—Ä–æ–Ω—Ç–µ–Ω–¥ –ø–æ–ª—É—á–∞–µ—Ç –≤—Å–µ –≤–∞—É—á–µ—Ä—ã –∏–∑ –±–ª–æ–∫—á–µ–π–Ω–∞
4. –û—Ç–æ–±—Ä–∞–∂–∞–µ—Ç –≤—Å–µ –≤–∞—É—á–µ—Ä—ã

## üéØ –ò–¢–û–ì:

### ‚úÖ **–í–ê–£–ß–ï–†–´ –•–†–ê–ù–Ø–¢–°–Ø –í –ë–õ–û–ö–ß–ï–ô–ù–ï:**
- üóÑÔ∏è **–•—Ä–∞–Ω—è—Ç—Å—è** –≤ —Å–º–∞—Ä—Ç-–∫–æ–Ω—Ç—Ä–∞–∫—Ç–µ `VoucherManager`
- üîó **–ü—Ä–∏–≤—è–∑–∞–Ω—ã** –∫ –∞–¥—Ä–µ—Å—É –∫–æ—à–µ–ª—å–∫–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
- üì± **–û—Ç–æ–±—Ä–∞–∂–∞—é—Ç—Å—è** –≤ –ª–∏—á–Ω–æ–º –∫–∞–±–∏–Ω–µ—Ç–µ —á–µ—Ä–µ–∑ —Ñ—Ä–æ–Ω—Ç–µ–Ω–¥
- üîÑ **–°–æ—Ö—Ä–∞–Ω—è—é—Ç—Å—è** –ø—Ä–∏ –ø–µ—Ä–µ–∑–∞–≥—Ä—É–∑–∫–µ/—Å–º–µ–Ω–µ —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞
- üõ°Ô∏è **–ë–µ–∑–æ–ø–∞—Å–Ω—ã** –∏ –Ω–µ–∏–∑–º–µ–Ω–Ω—ã

### ‚úÖ **–ù–ï –ó–ê–í–ò–°–Ø–¢ –û–¢ –§–†–û–ù–¢–ï–ù–î–ê:**
- ‚ùå **–ù–ï —Ö—Ä–∞–Ω—è—Ç—Å—è** –≤ –±—Ä–∞—É–∑–µ—Ä–µ
- ‚ùå **–ù–ï —Ç–µ—Ä—è—é—Ç—Å—è** –ø—Ä–∏ –ø–µ—Ä–µ–∑–∞–≥—Ä—É–∑–∫–µ
- ‚ùå **–ù–ï –∑–∞–≤–∏—Å—è—Ç** –æ—Ç —Å–µ—Ä–≤–µ—Ä–∞
- ‚úÖ **–í—Å–µ–≥–¥–∞ –¥–æ—Å—Ç—É–ø–Ω—ã** —á–µ—Ä–µ–∑ –±–ª–æ–∫—á–µ–π–Ω

**–í–∞—É—á–µ—Ä—ã –Ω–∞–¥–µ–∂–Ω–æ —Ö—Ä–∞–Ω—è—Ç—Å—è –≤ –±–ª–æ–∫—á–µ–π–Ω–µ –∏ –≤—Å–µ–≥–¥–∞ –±—É–¥—É—Ç –¥–æ—Å—Ç—É–ø–Ω—ã –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—é!** üéâ




